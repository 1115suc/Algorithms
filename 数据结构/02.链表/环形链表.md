# ğŸ” ç¯å½¢é“¾è¡¨(åŒå‘ç¯å½¢é“¾è¡¨å¸¦å“¨å…µ)

## ğŸ“š é“¾è¡¨æ¦‚è¿°

ç¯å½¢é“¾è¡¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„é“¾è¡¨ç»“æ„ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå½¢æˆä¸€ä¸ªé—­ç¯ã€‚åŒå‘ç¯å½¢é“¾è¡¨åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†å‰å‘æŒ‡é’ˆï¼Œä½¿å¾—å¯ä»¥åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šéå†ã€‚

### ğŸ›¡ï¸ å“¨å…µèŠ‚ç‚¹è®¾è®¡

åŒå‘ç¯å½¢é“¾è¡¨ä½¿ç”¨å•ä¸ªå“¨å…µèŠ‚ç‚¹è®¾è®¡ï¼š
- ä¸€ä¸ªå“¨å…µèŠ‚ç‚¹æ—¢æ˜¯å¤´èŠ‚ç‚¹ä¹Ÿæ˜¯å°¾èŠ‚ç‚¹
- å“¨å…µèŠ‚ç‚¹çš„å­˜åœ¨ç®€åŒ–äº†æ’å…¥å’Œåˆ é™¤æ“ä½œçš„è¾¹ç•Œå¤„ç†
- æ•´ä¸ªé“¾è¡¨å½¢æˆä¸€ä¸ªå®Œæ•´çš„ç¯çŠ¶ç»“æ„

![image-20221229144232651](imgs/image-20221229144232651.png)

![image-20221229143756065](imgs/image-20221229143756065.png)

![image-20221229153338425](imgs/image-20221229153338425.png)

---

## ğŸ¯ ç¯å½¢é“¾è¡¨å®ç°

### ğŸ—ï¸ ç¯å½¢é“¾è¡¨ç±» `DoublyLinkedListSentinel`

```java
public class DoublyLinkedListSentinel implements Iterable<Integer> {

    private final Node sentinel = new Node(null, -1, null); // å“¨å…µ

    public DoublyLinkedListSentinel() {
        sentinel.next = sentinel;
        sentinel.prev = sentinel;
    }

    static class Node {
        Node prev;
        int value;
        Node next;

        public Node(Node prev, int value, Node next) {
            this.prev = prev;
            this.value = value;
            this.next = next;
        }
    }
}
```


### ğŸ’¡ æ ¸å¿ƒè®¾è®¡ç‰¹ç‚¹

#### ğŸ—ï¸ åˆå§‹åŒ–è®¾è®¡
* ä½¿ç”¨å•ä¸ªå“¨å…µèŠ‚ç‚¹ `sentinel`
* åˆå§‹æ—¶ `sentinel.next` å’Œ `sentinel.prev` éƒ½æŒ‡å‘è‡ªèº«ï¼Œå½¢æˆä¸€ä¸ªè‡ªå¾ªç¯
* è¿™æ ·æ— è®ºé“¾è¡¨ä¸ºç©ºè¿˜æ˜¯éç©ºï¼Œæ“ä½œé€»è¾‘éƒ½æ˜¯ä¸€è‡´çš„

#### ğŸ“¦ èŠ‚ç‚¹ç±» `Node`
* åŒ…å«ä¸‰ä¸ªå­—æ®µï¼š`prev`(æŒ‡å‘å‰é©±)ã€`value`(å­˜å‚¨å€¼)ã€`next`(æŒ‡å‘åç»§)
* æ„é€ å‡½æ•°åŒæ—¶è®¾ç½®å‰é©±å’Œåç»§å¼•ç”¨

### ğŸ”„ ç¯å½¢ç»“æ„ç‰¹æ€§

ç¯å½¢é“¾è¡¨çš„å…³é”®åœ¨äºå“¨å…µèŠ‚ç‚¹çš„åˆå§‹åŒ–ï¼š

![image-20221229143756065](imgs/image-20221229143756065.png)

* å“¨å…µèŠ‚ç‚¹çš„ `next` å’Œ `prev` éƒ½æŒ‡å‘è‡ªå·±
* å½“æ’å…¥ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œè¯¥å…ƒç´ ä¼šè¢«æ’å…¥åˆ°å“¨å…µå’Œå“¨å…µä¹‹é—´
* å½¢æˆä¸€ä¸ªå®Œæ•´çš„ç¯ï¼šå“¨å…µ â†’ æ–°èŠ‚ç‚¹ â†’ å“¨å…µ

### â• åŸºæœ¬æ“ä½œå®ç°

#### å¤´éƒ¨æ“ä½œ
```java
/**
 * æ·»åŠ åˆ°ç¬¬ä¸€ä¸ª
 * @param value å¾…æ·»åŠ å€¼
 */
public void addFirst(int value) {
    Node next = sentinel.next;
    Node prev = sentinel;
    Node added = new Node(prev, value, next);
    prev.next = added;
    next.prev = added;
}
```


#### å°¾éƒ¨æ“ä½œ
```java
/**
 * æ·»åŠ åˆ°æœ€åä¸€ä¸ª
 * @param value å¾…æ·»åŠ å€¼
 */
public void addLast(int value) {
    Node prev = sentinel.prev;
    Node next = sentinel;
    Node added = new Node(prev, value, next);
    prev.next = added;
    next.prev = added;
}
```


#### ğŸ“ å®ç°è¦ç‚¹ï¼š
* `addFirst` åœ¨å“¨å…µèŠ‚ç‚¹åæ’å…¥æ–°èŠ‚ç‚¹
* `addLast` åœ¨å“¨å…µèŠ‚ç‚¹å‰æ’å…¥æ–°èŠ‚ç‚¹ï¼ˆå³é“¾è¡¨æœ«å°¾ï¼‰
* ç”±äºæ˜¯ç¯å½¢ç»“æ„ï¼Œè¿™ä¸¤ç§æ“ä½œæœ¬è´¨ä¸Šæ˜¯åœ¨åŒä¸€ä¸ªä½ç½®çš„ä¸åŒè¡¨è¿°

### â– åˆ é™¤æ“ä½œå®ç°

#### å¤´éƒ¨åˆ é™¤
```java
/**
 * åˆ é™¤ç¬¬ä¸€ä¸ª
 */
public void removeFirst() {
    Node removed = sentinel.next;
    if (removed == sentinel) {
        throw new IllegalArgumentException("éæ³•");
    }
    Node a = sentinel;
    Node b = removed.next;
    a.next = b;
    b.prev = a;
}
```


#### å°¾éƒ¨åˆ é™¤
```java
/**
 * åˆ é™¤æœ€åä¸€ä¸ª
 */
public void removeLast() {
    Node removed = sentinel.prev;
    if (removed == sentinel) {
        throw new IllegalArgumentException("éæ³•");
    }
    Node a = removed.prev;
    Node b = sentinel;
    a.next = b;
    b.prev = a;
}
```


#### æŒ‰å€¼åˆ é™¤
```java
/**
 * æ ¹æ®å€¼åˆ é™¤èŠ‚ç‚¹
 * <p>å‡å®š value åœ¨é“¾è¡¨ä¸­ä½œä¸º key, æœ‰å”¯ä¸€æ€§</p>
 * @param value å¾…åˆ é™¤å€¼
 */
public void removeByValue(int value) {
    Node removed = findNodeByValue(value);
    if (removed != null) {
        Node prev = removed.prev;
        Node next = removed.next;
        prev.next = next;
        next.prev = prev;
    }
}
```


#### ğŸ“ åˆ é™¤è¦ç‚¹ï¼š
* åˆ é™¤æ“ä½œç»Ÿä¸€ä¸ºï¼šæ–­å¼€å¾…åˆ é™¤èŠ‚ç‚¹ä¸å…¶å‰åèŠ‚ç‚¹çš„è¿æ¥ï¼Œé‡æ–°è¿æ¥å‰åèŠ‚ç‚¹
* ç©ºé“¾è¡¨æ£€æµ‹ï¼šå½“è¦åˆ é™¤çš„èŠ‚ç‚¹å°±æ˜¯å“¨å…µèŠ‚ç‚¹æ—¶ï¼Œè¡¨ç¤ºé“¾è¡¨ä¸ºç©º

### ğŸ” æŸ¥æ‰¾æ“ä½œ

```java
private Node findNodeByValue(int value) {
    Node p = sentinel.next;
    while (p != sentinel) {
        if (p.value == value) {
            return p;
        }
        p = p.next;
    }
    return null;
}
```


#### ğŸ“ æŸ¥æ‰¾ç‰¹ç‚¹ï¼š
* ä» `sentinel.next` å¼€å§‹éå†ï¼ˆç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹ï¼‰
* éå†ç»ˆæ­¢æ¡ä»¶æ˜¯å›åˆ°å“¨å…µèŠ‚ç‚¹
* è¿™ä½“ç°äº†ç¯å½¢ç»“æ„çš„ç‰¹ç‚¹

### ğŸ” è¿­ä»£å™¨éå†

```java
@Override
public Iterator<Integer> iterator() {
    return new Iterator<>() {
        Node p = sentinel.next;

        @Override
        public boolean hasNext() {
            return p != sentinel;
        }

        @Override
        public Integer next() {
            int value = p.value;
            p = p.next;
            return value;
        }
    };
}
```


#### ğŸ“ éå†ç‰¹ç‚¹ï¼š
* ä» `sentinel.next` å¼€å§‹ï¼ˆç¬¬ä¸€ä¸ªæœ‰æ•ˆèŠ‚ç‚¹ï¼‰
* `hasNext` åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦ä¸ºå“¨å…µèŠ‚ç‚¹
* `next` è¿”å›å½“å‰å€¼å¹¶ç§»åŠ¨åˆ°ä¸‹ä¸€èŠ‚ç‚¹
* å½“éå†å®Œæ•´ä¸ªé“¾è¡¨åä¼šå›åˆ°å“¨å…µèŠ‚ç‚¹ï¼Œä»è€Œç»“æŸéå†

### ğŸ“Š æ•°æ®ç»“æ„çŠ¶æ€æ¼”ç¤º

![image-20221229153338425](imgs/image-20221229153338425.png)

æ’å…¥å…ƒç´ åçŠ¶æ€ï¼š
![image-20221229154248800](imgs/image-20221229154248800.png)

### âš¡ æ€§èƒ½åˆ†æ

**éšæœºè®¿é—®æ€§èƒ½**:
æ ¹æ® index æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ $O(n)$

**æ’å…¥æˆ–åˆ é™¤æ€§èƒ½**:
* èµ·å§‹ä½ç½®ï¼š$O(1)$
* ç»“æŸä½ç½®ï¼š$O(1)$
* ä¸­é—´ä½ç½®ï¼šæ ¹æ®æŸ¥æ‰¾æ—¶é—´ + $O(1)$

**éå†æ€§èƒ½**:
* æ­£å‘éå†ï¼š$O(n)$
* åå‘éå†ï¼š$O(n)$ï¼ˆå¾—ç›ŠäºåŒå‘é“¾æ¥ï¼‰

### ğŸ¯ ç¯å½¢é“¾è¡¨ä¼˜åŠ¿

1. **ç»Ÿä¸€çš„æ“ä½œé€»è¾‘**ï¼šæ— éœ€åŒºåˆ†ç©ºé“¾è¡¨å’Œéç©ºé“¾è¡¨çš„å¤„ç†
2. **é«˜æ•ˆçš„è¾¹ç•Œæ“ä½œ**ï¼šå¤´éƒ¨å’Œå°¾éƒ¨æ“ä½œéƒ½æ˜¯ $O(1)$ æ—¶é—´å¤æ‚åº¦
3. **çµæ´»çš„éå†æ–¹å¼**ï¼šæ”¯æŒæ­£å‘å’Œåå‘éå†
4. **è‡ªç„¶çš„å¾ªç¯ç‰¹æ€§**ï¼šé€‚åˆå®ç°å¾ªç¯é˜Ÿåˆ—ç­‰åº”ç”¨åœºæ™¯

ç¯å½¢é“¾è¡¨ç‰¹åˆ«é€‚ç”¨äºéœ€è¦é¢‘ç¹åœ¨ä¸¤ç«¯è¿›è¡Œæ“ä½œä¸”å…·æœ‰å¾ªç¯ç‰¹æ€§çš„åœºæ™¯ï¼Œå¦‚ç¼“å†²åŒºç®¡ç†ã€ä»»åŠ¡è°ƒåº¦ç­‰ï¼ğŸš€