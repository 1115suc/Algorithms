# ğŸ” é€’å½’ç®—æ³•è¯¦è§£

## ğŸ“š ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿ

é€’å½’ï¼ˆRecursionï¼‰æ˜¯ä¸€ç§é‡è¦çš„ç¼–ç¨‹æŠ€æœ¯ï¼ŒæŒ‡çš„æ˜¯**å‡½æ•°ç›´æ¥æˆ–é—´æ¥åœ°è°ƒç”¨è‡ªèº«**æ¥è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚

> In computer science, **recursion** is a method of solving a computational problem where the solution depends on solutions to smaller instances of the same problem.

### ğŸ¯ æ ¸å¿ƒæ€æƒ³

é€’å½’å°†ä¸€ä¸ªå¤æ‚çš„é—®é¢˜åˆ†è§£ä¸ºè§„æ¨¡æ›´å°çš„ç›¸åŒç±»å‹çš„å­é—®é¢˜ï¼Œç›´åˆ°å­é—®é¢˜è¶³å¤Ÿç®€å•å¯ä»¥ç›´æ¥è§£å†³ã€‚

---

## âš™ï¸ é€’å½’çš„åŸºæœ¬è¦ç´ 

### 1. åŸºå‡†æƒ…å½¢ï¼ˆBase Caseï¼‰

é€’å½’å¿…é¡»æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª**ä¸éœ€è¦ç»§ç»­é€’å½’å°±èƒ½ç›´æ¥å¾—å‡ºç­”æ¡ˆçš„æƒ…å½¢**ï¼Œé˜²æ­¢æ— é™é€’å½’ã€‚

### 2. é€’å½’æƒ…å½¢ï¼ˆRecursive Caseï¼‰

é—®é¢˜å¯ä»¥è¢«åˆ†è§£ä¸ºä¸€ä¸ªæˆ–å¤šä¸ª**è§„æ¨¡æ›´å°çš„ç›¸åŒé—®é¢˜**ï¼Œå¹¶é€šè¿‡é€’å½’è°ƒç”¨æ¥è§£å†³ã€‚

### ğŸ“ é€’å½’å‡½æ•°æ¨¡æ¿

```java
void f(Node node) {
    if(node == null) {
        return;
    }
    println("before:" + node.value)
    f(node.next);
    println("after:" + node.value)
}
```

**æ€è·¯**

1. ç¡®å®šèƒ½å¦ä½¿ç”¨é€’å½’æ±‚è§£
2. æ¨å¯¼å‡ºé€’æ¨å…³ç³»ï¼Œå³çˆ¶é—®é¢˜ä¸å­é—®é¢˜çš„å…³ç³»ï¼Œä»¥åŠé€’å½’çš„ç»“æŸæ¡ä»¶

ä¾‹å¦‚ä¹‹å‰éå†é“¾è¡¨çš„é€’æ¨å…³ç³»ä¸º

$$
f(n) =
\begin{cases}
åœæ­¢& n = null \\
f(n.next) & n \neq null
\end{cases}
$$

* æ·±å…¥åˆ°æœ€é‡Œå±‚å«åš**é€’**
* ä»æœ€é‡Œå±‚å‡ºæ¥å«åš**å½’**
* åœ¨**é€’**çš„è¿‡ç¨‹ä¸­ï¼Œå¤–å±‚å‡½æ•°å†…çš„å±€éƒ¨å˜é‡ï¼ˆä»¥åŠæ–¹æ³•å‚æ•°ï¼‰å¹¶æœªæ¶ˆå¤±ï¼Œ**å½’**çš„æ—¶å€™è¿˜å¯ä»¥ç”¨åˆ°

---

## å•è·¯é€’å½’

### 1.é˜¶ä¹˜

ç”¨é€’å½’æ–¹æ³•æ±‚é˜¶ä¹˜

* é˜¶ä¹˜çš„å®šä¹‰ $n!= 1â‹…2â‹…3â‹¯(n-2)â‹…(n-1)â‹…n$ï¼Œå…¶ä¸­ $n$ ä¸ºè‡ªç„¶æ•°ï¼Œå½“ç„¶ $0! = 1$
* é€’æ¨å…³ç³»

$$
f(n) =
\begin{cases}
1 & n = 1\\
n * f(n-1) & n > 1
\end{cases}
$$

```java
private static int f(int n) {
    if (n == 1) {
        return 1;
    }
    return n * f(n - 1);
}
```

### 2.åå‘æ‰“å°å­—ç¬¦ä¸²

ç”¨é€’å½’åå‘æ‰“å°å­—ç¬¦ä¸²ï¼Œn ä¸ºå­—ç¬¦åœ¨æ•´ä¸ªå­—ç¬¦ä¸² str ä¸­çš„ç´¢å¼•ä½ç½®

* **é€’**ï¼šn ä» 0 å¼€å§‹ï¼Œæ¯æ¬¡ n + 1ï¼Œä¸€ç›´é€’åˆ° n == str.length() - 1
* **å½’**ï¼šä» n == str.length() å¼€å§‹å½’ï¼Œä»å½’æ‰“å°ï¼Œè‡ªç„¶æ˜¯é€†åºçš„

é€’æ¨å…³ç³»
$$
f(n) =
\begin{cases}
åœæ­¢ & n = str.length() \\
f(n+1) & 0 \leq n \leq str.length() - 1
\end{cases}
$$
ä»£ç ä¸º

```java
public static void reversePrint(String str, int index) {
    if (index == str.length()) {
        return;
    }
    reversePrint(str, index + 1);
    System.out.println(str.charAt(index));
}
```

### 3.äºŒåˆ†æŸ¥æ‰¾ï¼ˆå•è·¯é€’å½’ï¼‰

```java
public static int binarySearch(int[] a, int target) {
    return recursion(a, target, 0, a.length - 1);
}

public static int recursion(int[] a, int target, int i, int j) {
    if (i > j) {
        return -1;
    }
    int m = (i + j) >>> 1;
    if (target < a[m]) {
        return recursion(a, target, i, m - 1);
    } else if (a[m] < target) {
        return recursion(a, target, m + 1, j);
    } else {
        return m;
    }
}
```

### 4.å†’æ³¡æ’åºï¼ˆå•è·¯é€’å½’ï¼‰

```java
public static void main(String[] args) {
    int[] a = {3, 2, 6, 1, 5, 4, 7};
    bubble(a, 0, a.length - 1);
    System.out.println(Arrays.toString(a));
}

private static void bubble(int[] a, int low, int high) {
    if(low == high) {
        return;
    }
    int j = low;
    for (int i = low; i < high; i++) {
        if (a[i] > a[i + 1]) {
            swap(a, i, i + 1);
            j = i;
        }
    }
    bubble(a, low, j);
}

private static void swap(int[] a, int i, int j) {
    int t = a[i];
    a[i] = a[j];
    a[j] = t;
}
```

* low ä¸ high ä¸ºæœªæ’åºèŒƒå›´
* j è¡¨ç¤ºçš„æ˜¯æœªæ’åºçš„è¾¹ç•Œï¼Œä¸‹ä¸€æ¬¡é€’å½’æ—¶çš„ high
    * å‘ç”Ÿäº¤æ¢ï¼Œæ„å‘³ç€æœ‰æ— åºæƒ…å†µ
    * æœ€åä¸€æ¬¡äº¤æ¢ï¼ˆä»¥åæ²¡æœ‰æ— åºï¼‰æ—¶ï¼Œå·¦ä¾§ i ä»æ˜¯æ— åºï¼Œå³ä¾§ i+1 å·²ç„¶æœ‰åº
* è§†é¢‘ä¸­è®²è§£çš„æ˜¯åªè€ƒè™‘ high è¾¹ç•Œçš„æƒ…å†µï¼Œå‚è€ƒä»¥ä¸Šä»£ç ï¼Œç†è§£åœ¨ low .. high èŒƒå›´å†…çš„å¤„ç†æ–¹æ³•

### 5.æ’å…¥æ’åºï¼ˆå•è·¯é€’å½’ï¼‰

```java
public static void main(String[] args) {
    int[] a = {3, 2, 6, 1, 5, 7, 4};
    insertion(a, 1, a.length - 1);
    System.out.println(Arrays.toString(a));
}

private static void insertion(int[] a, int low, int high) {
    if (low > high) {
        return;
    }
    int i = low - 1;
    int t = a[low];
    while (i >= 0 && a[i] > i) {
        a[i + 1] = a[i];
        i--;
    }
    if(i + 1 != low) {
        a[i + 1] = t;
    }    
    insertion(a, low + 1, high);
}
```

* å·²æ’åºåŒºåŸŸï¼š[0 .. i .. low-1]
* æœªæ’åºåŒºåŸŸï¼š[low .. high]
* è§†é¢‘ä¸­è®²è§£çš„æ˜¯åªè€ƒè™‘ low è¾¹ç•Œçš„æƒ…å†µï¼Œå‚è€ƒä»¥ä¸Šä»£ç ï¼Œç†è§£ low-1 ..  high èŒƒå›´å†…çš„å¤„ç†æ–¹æ³•
* æ‰©å±•ï¼šåˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾ leftmost ç‰ˆæœ¬ï¼Œæ”¹è¿›å¯»æ‰¾æ’å…¥ä½ç½®çš„ä»£ç 

### çº¦ç‘Ÿå¤«é—®é¢˜ï¼ˆå•è·¯é€’å½’ï¼‰

$n$ ä¸ªäººæ’æˆåœ†åœˆï¼Œä»å¤´å¼€å§‹æŠ¥æ•°ï¼Œæ¯æ¬¡æ•°åˆ°ç¬¬ $m$ ä¸ªäººï¼ˆ$m$ ä» $1$ å¼€å§‹ï¼‰æ€ä¹‹ï¼Œç»§ç»­ä»ä¸‹ä¸€ä¸ªäººé‡å¤ä»¥ä¸Šè¿‡ç¨‹ï¼Œæ±‚æœ€åæ´»ä¸‹æ¥çš„äººæ˜¯è°ï¼Ÿ



**æ–¹æ³•1**

æ ¹æ®æœ€åçš„å­˜æ´»è€… a å€’æ¨å‡ºå®ƒåœ¨ä¸Šä¸€è½®çš„ç´¢å¼•å·

| f(n,m) | æœ¬è½®ç´¢å¼• | ä¸ºäº†è®© a æ˜¯è¿™ä¸ªç´¢å¼•ï¼Œä¸Šä¸€è½®åº”å½“è¿™æ ·æ’ | è§„å¾‹        |
| ------ | -------- | ------------------------------------- | ----------- |
| f(1,3) | 0        | x x x a                               | (0 + 3) % 2 |
| f(2,3) | 1        | x x x 0 a                             | (1 + 3) % 3 |
| f(3,3) | 1        | x x x 0 a                             | (1 + 3) % 4 |
| f(4,3) | 0        | x x x a                               | (0 + 3) % 5 |
| f(5,3) | 3        | x x x 0 1 2 a                         | (3 + 3) % 6 |
| f(6,3) | 0        | x x x a                               |             |



**æ–¹æ³•2**

è®¾ n ä¸ºæ€»äººæ•°ï¼Œm ä¸ºæŠ¥æ•°æ¬¡æ•°ï¼Œè§£è¿”å›çš„æ˜¯è¿™äº›äººçš„ç´¢å¼•ï¼Œä»0å¼€å§‹

| f(n, m) | è§£                       | è§„å¾‹  |
| ------- | ------------------------ | ----- |
| f(1, 3) | 0                        |       |
| f(2, 3) | 0 1 => 1                 | 3%2=1 |
| f(3, 3) | 0 1 2 => 0 1             | 3%3=0 |
| f(4, 3) | 0 1 2 3 => 3 0 1         | 3%4=3 |
| f(5, 3) | 0 1 2 3 4  => 3 4 0 1    | 3%5=3 |
| f(6, 3) | 0 1 2 3 4 5 => 3 4 5 0 1 | 3%6=3 |

**ä¸€. æ‰¾å‡ºç­‰ä»·å‡½æ•°**

è§„å¾‹ï¼šä¸‹æ¬¡æŠ¥æ•°çš„èµ·ç‚¹ä¸º $k = m \% n$

* é¦–æ¬¡å‡ºåˆ—äººçš„åºå·æ˜¯ $k-1$ï¼Œå‰©ä¸‹çš„çš„ $n-1$ ä¸ªäººé‡æ–°ç»„æˆçº¦ç‘Ÿå¤«ç¯
* ä¸‹æ¬¡ä» $k$ å¼€å§‹æ•°ï¼Œåºå·å¦‚ä¸‹
    * $k,\ k+1, \ ...\ ,\ 0,\ 1,\ k-2$ï¼Œå¦‚ä¸Šä¾‹ä¸­ $3\ 4\ 5\ 0\ 1$

è¿™ä¸ªå‡½æ•°ç§°ä¹‹ä¸º $g(n-1,m)$ï¼Œå®ƒçš„æœ€ç»ˆç»“æœä¸ $f(n,m)$ æ˜¯ç›¸åŒçš„ã€‚



**äºŒ. æ‰¾åˆ°æ˜ å°„å‡½æ•°**

ç°åœ¨æƒ³åŠæ³•æ‰¾åˆ° $g(n-1,m)$ ä¸ $f(n-1, m)$ çš„å¯¹åº”å…³ç³»ï¼Œå³
$$
3 \rightarrow 0 \\
4 \rightarrow 1 \\
5 \rightarrow 2 \\
0 \rightarrow 3 \\
1 \rightarrow 4 \\
$$
æ˜ å°„å‡½æ•°ä¸º
$$
mapping(x) =
\begin{cases}
x-k & x=[k..n-1] \\
x+n-k & x=[0..k-2]
\end{cases}
$$
ç­‰ä»·äºä¸‹é¢å‡½æ•°
$$
mapping(x) = (x + n - k)\%{n}
$$
ä»£å…¥æµ‹è¯•ä¸€ä¸‹
$$
3 \rightarrow (3+6-3)\%6 \rightarrow 0 \\
4 \rightarrow (4+6-3)\%6 \rightarrow 1 \\
5 \rightarrow (5+6-3)\%6 \rightarrow 2 \\
0 \rightarrow (0+6-3)\%6 \rightarrow 3 \\
1 \rightarrow (1+6-3)\%6 \rightarrow 4 \\
$$
ç»¼ä¸Šæœ‰
$$
f(n-1,m) = mapping(g(n-1,m))
$$


**ä¸‰. æ±‚é€†æ˜ å°„å‡½æ•°**

æ˜ å°„å‡½æ•°æ˜¯æ ¹æ® x è®¡ç®— yï¼Œé€†æ˜ å°„å‡½æ•°å³æ ¹æ® y å¾—åˆ° x
$$
mapping^{-1}(x) = (x + k)\%n
$$
ä»£å…¥æµ‹è¯•ä¸€ä¸‹
$$
0 \rightarrow (0+3)\%6 \rightarrow 3 \\
1 \rightarrow (1+3)\%6 \rightarrow 4 \\
2 \rightarrow (2+3)\%6 \rightarrow 5 \\
3 \rightarrow (3+3)\%6 \rightarrow 0 \\
4 \rightarrow (4+3)\%6 \rightarrow 1 \\
$$
å› æ­¤å¯ä»¥æ±‚å¾—
$$
g(n-1,m) = mapping^{-1}(f(n-1,m))
$$


**å››. é€’æ¨å¼**

ä»£å…¥æ¨å¯¼
$$
\begin{aligned}
f(n,m) = \ & g(n-1,m) \\
= \ & mapping^{-1}(f(n-1,m)) \\
= \ & (f(n-1,m) + k) \% n \\
= \ & (f(n-1,m) + m\%n) \% n \\
= \ & (f(n-1,m) + m) \% n \\
\end{aligned}
$$
æœ€åä¸€æ­¥åŒ–ç®€æ˜¯åˆ©ç”¨äº†æ¨¡è¿ç®—æ³•åˆ™

$(a+b)\%n = (a\%n + b\%n) \%n$  ä¾‹å¦‚

* $(6+6)\%5 = 2 = (6+6\%5)\%5$
* $(6+5)\%5 = 1 = (6+5\%5)\%5$
* $(6+4)\%5 = 0 = (6+4\%5)\%5$

æœ€ç»ˆé€’æ¨å¼
$$
f(n,m) =
\begin{cases}
(f(n-1,m) + m) \% n & n>1\\
0 & n = 1
\end{cases}
$$
